<view style="width:100%;"><view class="content"><view class="detail_title_content"><view class="type_content flex flex_bottom"><block wx:if="{{taskInfo.type=='timeliness'}}"><button class="primary">时效性任务</button></block><block wx:if="{{taskInfo.type=='cycle'}}"><button data-event-opts="{{[['tap',[['showList',['$event']]]]]}}" class="primary" bindtap="__e">周期任务</button></block><block wx:if="{{taskInfo.type=='urgent'}}"><button class="primary" style="color:#e60012;">紧急任务</button></block><block wx:if="{{statusCode>3&&userType!='dronePilot'}}"><uni-icons style="margin-left:20rpx;" vue-id="1" type="paperplane" color="#fff" size="26" data-event-opts="{{[['^click',[['taskShare']]]]}}" bind:click="__e" bind:__l="__l"></uni-icons></block></view><view class="detail_title_right"><label class="_span">{{taskInfo.startTime}}</label></view></view><view class="switch_content"><view><button data-event-opts="{{[['tap',[['active',[1]]]]]}}" class="{{['switch',action==1?'action':'']}}" bindtap="__e">详情</button></view><block wx:if="{{taskInfo.type=='timeliness'&&statusCode>3||userType=='dronePilot'}}"><view><button data-event-opts="{{[['tap',[['active',[2]]]]]}}" class="{{['switch',action==2?'action':'']}}" bindtap="__e">图片</button></view></block><block wx:if="{{taskInfo.type=='cycle'&&statusCode>2&&userType!='dronePilot'}}"><view><button data-event-opts="{{[['tap',[['active',[5]]]]]}}" class="{{['switch',action==5?'action':'']}}" bindtap="__e">违规判定</button></view></block><block wx:if="{{taskInfo.type=='timeliness'&&statusCode>3||userType=='dronePilot'}}"><view><button data-event-opts="{{[['tap',[['active',[3]]]]]}}" class="{{['switch',action==3?'action':'']}}" bindtap="__e">视频</button></view></block><block wx:if="{{taskInfo.type=='cycle'&&statusCode>2}}"><view><button data-event-opts="{{[['tap',[['active',[6]]]]]}}" class="{{['switch',action==6?'action':'']}}" bindtap="__e">标准</button></view></block><block wx:if="{{taskInfo.type=='timeliness'&&statusCode>3}}"><view><button data-event-opts="{{[['tap',[['active',[4]]]]]}}" class="{{['switch',action==4?'action':'']}}" bindtap="__e">沟通记录</button></view></block></view><block wx:if="{{action==1}}"><view class="view_content vue-ref" id="view" data-ref="view"><view class="span_content"><view class="span_label"><label class="_span">设备名称：</label><label class="_span">{{taskInfo.deviceName||"--"}}</label></view><view class="span_label"><label class="_span">飞手名称：</label><label class="_span">{{taskInfo.personName||"--"}}</label></view><block wx:for="{{cycleTypeName}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{taskInfo.type=='cycle'}}"><view class="span_label"><label class="_span">巡检周期：</label><label class="_span">{{item}}</label></view></block></block></view><label class="title blue _span">任务地点</label><map hidden="{{!(mapShow)}}" class="map" id="map1" latitude="{{latitude}}" longitude="{{longitude}}" markers="{{covers}}" polyline="{{polyline}}"></map><label class="title blue _span">任务描述</label><scroll-view class="desc_scroll_content" scroll-y><view class="_p">{{taskInfo.taskDesc}}</view></scroll-view><block wx:if="{{statusCode<4&&statusCode>1}}"><view><label class="title blue _span">审批意见</label><scroll-view class="desc_scroll_content" scroll-y><view class="_p">{{taskInfo.approveList[taskInfo.approveList.length-1].opinion}}</view></scroll-view></view></block><block wx:if="{{statusCode>=5&&taskInfo.type=='timeliness'&&userType!='dronePilot'}}"><view><label class="title blue _span">满意度评价</label><view class="rate"><uni-rate vue-id="2" value="{{rateValue}}" disabled="{{isDetail}}" color="{{rateColor}}" activeColor="{{rateActiveColor}}" data-event-opts="{{[['^change',[['rateChange']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><label class="rateSpan _span">{{rateSpan}}</label></uni-rate></view><block wx:if="{{statusCode==5}}"><textarea class="textarea" placeholder="请输入意见" auto-height data-event-opts="{{[['input',[['__set_model',['','taskstaisDesc','$event',[]]]]]]}}" value="{{taskstaisDesc}}" bindinput="__e"></textarea></block><block wx:if="{{statusCode==6}}"><scroll-view class="desc_scroll_content" scroll-y><view class="_p">{{taskInfo.satisfactionDesc}}</view></scroll-view></block></view></block><block wx:if="{{userType!='dronePilot'&&taskInfo.type=='cycle'}}"><form><view class="iking-flex-left"><label class="title blue _span">任务标准</label><button class="mini-btn" style="background-color:#1d94df;" type="primary" size="mini" data-event-opts="{{[['tap',[['uploadImage',['$event']]]]]}}" bindtap="__e">提交</button></view><view class="uni-list list-pd"><view class="uni-list-cell cell-pd"><view class="uni-uploader"><view class="uni-uploader-head"><view class="uni-uploader-title">点击可预览选好的图片</view><view class="uni-uploader-info">{{imageList.length+"/9"}}</view></view><view class="uni-uploader-body"><view class="uni-uploader__files"><block wx:for="{{imageList}}" wx:for-item="image" wx:for-index="index" wx:key="index"><block><view class="uni-uploader__file"><image class="uni-uploader__img" src="{{image}}" data-src="{{image}}" data-event-opts="{{[['tap',[['previewImage',['$event']]]]]}}" bindtap="__e"></image></view></block></block><view class="uni-uploader__input-box"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="uni-uploader__input" bindtap="__e"></view></view></view></view></view></view></view></form></block><block wx:if="{{userType=='dronePilot'&&statusCode>3&&statusCode<6}}"><form><view class="iking-flex-left"><label class="title blue _span">数据上传</label><button class="mini-btn" style="background-color:#1d94df;" type="primary" size="mini" data-event-opts="{{[['tap',[['uploadImage',['$event']]]]]}}" bindtap="__e">提交</button></view><view class="uni-list list-pd"><view class="uni-list-cell cell-pd"><view class="uni-uploader"><view class="uni-uploader-head"><view class="uni-uploader-title">点击可预览选好的图片</view><view class="uni-uploader-info">{{imageList.length+"/9"}}</view></view><view class="uni-uploader-body"><view class="uni-uploader__files"><block wx:for="{{imageList}}" wx:for-item="image" wx:for-index="index" wx:key="index"><block><view class="uni-uploader__file"><image class="uni-uploader__img" src="{{image}}" data-src="{{image}}" data-event-opts="{{[['tap',[['previewImage',['$event']]]]]}}" bindtap="__e"></image></view></block></block><view class="uni-uploader__input-box"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="uni-uploader__input" bindtap="__e"></view></view></view></view></view></view></view><block wx:if="{{!src}}"><view data-event-opts="{{[['tap',[['chooseVideo',['$event']]]]]}}" class="uni-hello-addfile" bindtap="__e">+ 添加视频</view></block><block wx:else><video class="video" src="{{src}}"></video></block></form></block></view></block><scroll-view hidden="{{!(action==2)}}" class="view_content"><view class="pic_list"><block wx:for="{{taskInfo.imageList}}" wx:for-item="x" wx:for-index="y" wx:key="y"><view data-event-opts="{{[['tap',[['clickPic',[y]]]]]}}" bindtap="__e"><image mode="aspectFill" lazy-load="@/static/headimage.png" src="{{x.url}}"></image></view></block></view><block wx:if="{{taskInfo.imageList.length==0}}"><view class="flex iking-flex-center"><label class="_span">暂无图片</label></view></block></scroll-view><scroll-view hidden="{{!(action==5)}}" class="view_content" scroll-y="true"><swiper class="swiper"><block wx:for="{{taskInfo.imageList}}" wx:for-item="item" wx:for-index="__i0__"><swiper-item><view class="swiper-item flex iking-flex-center" style="background-color:#000;"><image src="{{item.url}}" width="100%"></image></view></swiper-item></block></swiper><block wx:for="{{taskInfo.videoList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><video style="width:100%;" id="{{'video'+index}}" src="{{item.url}}" controls></video></block><view class="list _div"><swiper class="swiper"><block wx:for="{{taskInfo.referenceList}}" wx:for-item="item" wx:for-index="__i1__"><swiper-item><view class="swiper-item flex iking-flex-center" style="background-color:#000;"><image src="{{item.url}}" mode="aspectFit"></image></view></swiper-item></block></swiper></view></scroll-view><scroll-view hidden="{{!(action==6)}}" class="view_content"><view class="pic_list"><block wx:for="{{taskInfo.referenceList}}" wx:for-item="x" wx:for-index="y" wx:key="y"><view data-event-opts="{{[['tap',[['clickRef',[y]]]]]}}" bindtap="__e"><image mode="aspectFill" lazy-load="@/static/headimage.png" src="{{x.url}}"></image></view></block></view><block wx:if="{{taskInfo.referenceList.length==0}}"><view class="flex iking-flex-center"><label class="_span">暂无图片</label></view></block></scroll-view><block wx:if="{{action==3}}"><view class="view_content"><block wx:for="{{taskInfo.videoList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><video style="width:100%;" id="{{'video'+index}}" src="{{item.url}}" controls></video></block></view></block><block wx:if="{{submitText!=''}}"><view class="bottom_content"><button data-event-opts="{{[['tap',[['submit',['$event']]]]]}}" class="primary blue" bindtap="__e">{{submitText}}</button><block wx:if="{{taskInfo.status=='being'}}"><button data-event-opts="{{[['tap',[['endTask',['$event']]]]]}}" class="primary blue" style="margin-left:20rpx;" bindtap="__e">结束任务</button></block></view></block></view><uni-calendar class="calendar vue-ref" vue-id="3" insert="{{false}}" date="{{date}}" startDate="{{date}}" data-ref="calendar" data-event-opts="{{[['^confirm',[['dateConfirm']]],['^close',[['dateClose']]]]}}" bind:confirm="__e" bind:close="__e" bind:__l="__l"></uni-calendar><uni-drawer vue-id="4" visible="{{showLeft}}" mode="left" data-event-opts="{{[['^close',[['closeDrawer']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><scroll-view style="height:100%;" scroll-y="true"><uni-list vue-id="{{('5')+','+('4')}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{taskInfo.taskList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list-item vue-id="{{('6-'+index)+','+('5')}}" show-badge="{{true}}" title="{{item.startTime}}" badge-text="{{item.status}}" data-event-opts="{{[['^click',[['changeTask',['$0'],[[['taskInfo.taskList','',index]]]]]]]}}" bind:click="__e" bind:__l="__l"></uni-list-item></block></uni-list></scroll-view><view><view class="word-btn" hover-class="word-btn--hover" hover-start-time="{{20}}" hover-stay-time="{{70}}" data-event-opts="{{[['tap',[['hide',['$event']]]]]}}" bindtap="__e"><text class="word-btn-white">关闭Drawer</text></view></view></uni-drawer></view>
<view class="content"><view class="type_content"><block wx:if="{{userType!='dronePilot'}}"><button data-event-opts="{{[['tap',[['active',[1]]]]]}}" class="{{['primary',action==1?'action':'']}}" bindtap="__e">时效性任务</button></block><block wx:if="{{userType!='dronePilot'}}"><button data-event-opts="{{[['tap',[['active',[2]]]]]}}" class="{{['primary',action==2?'action':'']}}" bindtap="__e">周期任务</button></block><button data-event-opts="{{[['tap',[['active',[3]]]]]}}" class="{{['primary red',action==3?'action':'']}}" bindtap="__e">紧急任务</button></view><scroll-view class="task_content" scroll-y><block wx:if="{{action==1}}"><view><label class="title blue _span">开始时间</label><button data-event-opts="{{[['tap',[['open',['$event']]]]]}}" class="primary blue date" bindtap="__e">{{dateInfo.date+" "+dateInfo.time}}</button></view></block><block wx:if="{{action==2}}"><view><view class="iking-flex-left"><label class="title blue _span">巡检周期</label><picker class="cycleType" range="{{cycleTypeList}}" value="{{cycleTypeIndex}}" data-event-opts="{{[['change',[['changeCycleType',['$event']]]]]}}" bindchange="__e"><iking-select vue-id="1" bind:__l="__l" vue-slots="{{['default']}}">{{cycleTypeList[cycleTypeIndex]}}</iking-select></picker></view><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cycleContent"><label class="title blue _span" style="margin-right:40rpx;">巡检时间</label><block wx:if="{{item.$orig.dateSpan}}"><picker class="pick1" range="{{cycleDateList}}" value="{{item.$orig.date}}" data-event-opts="{{[['change',[['changeDate',['$event',index]]]]]}}" bindchange="__e"><iking-select vue-id="{{'2-'+index}}" bind:__l="__l" vue-slots="{{['default']}}">{{item.$orig.dateSpan}}</iking-select></picker></block><picker class="pick2" mode="time" value="{{item.$orig.time}}" data-event-opts="{{[['change',[['selectTime',['$event',index]]]]]}}" bindchange="__e"><iking-select vue-id="{{'3-'+index}}" name="ikingSelect1" bind:__l="__l" vue-slots="{{['default']}}">{{item.g0[0]}}</iking-select><label class="_span">:</label><iking-select vue-id="{{'4-'+index}}" name="ikingSelect2" bind:__l="__l" vue-slots="{{['default']}}">{{item.g1[1]}}</iking-select></picker><block wx:if="{{index==0}}"><view data-event-opts="{{[['tap',[['addcycle',[index]]]]]}}" class="addCycle" bindtap="__e">+</view></block><block wx:if="{{index!=0}}"><view data-event-opts="{{[['tap',[['delcycle',[index]]]]]}}" class="delCycle" bindtap="__e">—</view></block></view></block></view></block><block wx:if="{{action==3}}"><view><label class="title blue _span">需求无人机数量</label><picker-view indicator-style="{{indicatorStyle}}" value="{{[1]}}" data-event-opts="{{[['change',[['bindChange',['$event']]]]]}}" bindchange="__e"><picker-view-column><block wx:for="{{deviceList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="item">{{index+1}}</view></block></picker-view-column></picker-view></view></block><label class="title blue _span">任务地点</label><map class="map" id="map1" hidden="{{mapshow}}" latitude="{{latitude}}" longitude="{{longitude}}" markers="{{covers}}" polyline="{{polyline}}" polygons="{{polygons}}" data-event-opts="{{[['tap',[['tap',['$event']]]],['regionchange',[['regionchange',['$event']]]]]}}" bindtap="__e" bindregionchange="__e"></map><label class="title blue _span">任务描述</label><textarea class="textarea" placeholder="请输入" auto-height data-event-opts="{{[['input',[['__set_model',['','taskDesc','$event',[]]]]]]}}" value="{{taskDesc}}" bindinput="__e"></textarea><block wx:if="{{userType!='dronePilot'&&action==2}}"><form><view class="iking-flex-left"><label class="title blue _span">任务标准</label><button class="mini-btn" style="background-color:#1d94df;" type="primary" size="mini" data-event-opts="{{[['tap',[['uploadImage',['$event']]]]]}}" bindtap="__e">提交</button></view><view class="uni-list list-pd"><view class="uni-list-cell cell-pd"><view class="uni-uploader"><view class="uni-uploader-head"><view class="uni-uploader-title">点击可预览选好的图片</view><view class="uni-uploader-info">{{imageList.length+"/9"}}</view></view><view class="uni-uploader-body"><view class="uni-uploader__files"><block wx:for="{{imageList}}" wx:for-item="image" wx:for-index="index" wx:key="index"><block><view class="uni-uploader__file"><image class="uni-uploader__img" src="{{image}}" data-src="{{image}}" data-event-opts="{{[['tap',[['previewImage',['$event']]]]]}}" bindtap="__e"></image></view></block></block><view class="uni-uploader__input-box"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="uni-uploader__input" bindtap="__e"></view></view></view></view></view></view></view></form></block></scroll-view><uni-calendar class="calendar vue-ref" vue-id="5" type="time" time="{{dateInfo.time}}" date="{{dateInfo.date}}" insert="{{dateInfo.insert}}" lunar="{{dateInfo.lunar}}" startDate="{{dateInfo.startDate}}" endDate="{{dateInfo.endDate}}" range="{{dateInfo.range}}" data-ref="calendar" data-event-opts="{{[['^confirm',[['confirm']]],['^close',[['close']]]]}}" bind:confirm="__e" bind:close="__e" bind:__l="__l"></uni-calendar><view class="bottom_content"><button data-event-opts="{{[['tap',[['submit',['$event']]]]]}}" class="primary blue" bindtap="__e">提交</button></view></view>
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/task/taskDetail"],{"03b7":function(t,e,i){"use strict";i.r(e);var n=i("04f2"),s=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=s.a},"04f2":function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e,i,n,s,a,u){try{var r=t[a](u),o=r.value}catch(c){return void i(c)}r.done?e(o):Promise.resolve(o).then(n,s)}function r(t){return function(){var e=this,i=arguments;return new Promise(function(n,s){var a=t.apply(e,i);function r(t){u(a,n,s,r,o,"next",t)}function o(t){u(a,n,s,r,o,"throw",t)}r(void 0)})}}var o=function(){return i.e("components/uni-rate/uni-rate").then(i.bind(null,"b0c7"))},c=function(){return i.e("components/uni-nav-bar/uni-nav-bar").then(i.bind(null,"1edf"))},l=[["camera"],["album"],["camera","album"]],f=[["compressed"],["original"],["compressed","original"]],h={components:{uniRate:o,uniNavBar:c},data:function(){return{title:"任务1",status:"已结束",statusCode:4,submitText:"提交",taskType:1,action:1,userType:"dronePilot",latitude:39.119929,longitude:117.752705,rateColor:"#b5b5b5",rateActiveColor:"#1d94df",rateValue:5,isDetail:!1,video:null,imageList:[],videoSrc:"",sourceTypeIndex:1,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],countIndex:8,count:[1,2,3,4,5,6,7,8,9]}},methods:{active:function(t){this.action=t,this.video.pause()},rateChange:function(t){this.rateValue=t.value},back:function(){t.navigateBack()},submit:function(){},chooseImage:function(){var e=r(s.default.mark(function e(){var i,a=this;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(9!==this.imageList.length){e.next=7;break}return e.next=3,this.isFullImg();case 3:if(i=e.sent,console.log(n("是否继续?",i," at pages\\task\\taskDetail.vue:205")),i){e.next=7;break}return e.abrupt("return");case 7:t.chooseImage({sourceType:l[this.sourceTypeIndex],sizeType:f[this.sizeTypeIndex],count:this.imageList.length+this.count[this.countIndex]>9?9-this.imageList.length:this.count[this.countIndex],success:function(t){a.imageList=a.imageList.concat(t.tempFilePaths)}});case 8:case"end":return e.stop()}},e,this)}));function i(){return e.apply(this,arguments)}return i}(),isFullImg:function(){var e=this;return new Promise(function(i){t.showModal({content:"已经有9张图片了,是否清空现有图片？",success:function(t){t.confirm?(e.imageList=[],i(!0)):i(!1)},fail:function(){i(!1)}})})},previewImage:function(e){var i=e.target.dataset.src;t.previewImage({current:i,urls:this.imageList})},chooseVideo:function(){var e=this;t.chooseVideo({sourceType:l[this.sourceTypeIndex],success:function(t){e.src=t.tempFilePath}})},_ready:function(){switch(this.userType="dronePilot",this.video=t.createVideoContext("video1",this),t.setNavigationBarTitle({title:"任务1"}),this.statusCode){case 1:this.status="待审批",this.submitText="关闭",this.submit=function(){t.navigateBack()};break;case 2:this.status="通过",this.submitText="开始任务",this.submit=function(){this._ready()};break;case 3:this.status="拒绝",this.submitText="修改",this.submit=function(){t.redirectTo({url:"/pages/task/createTask"})};break;case 4:this.status="执行中","dronePilot"==this.userType?(this.submitText="取消任务",this.submit=function(){t.showModal({title:"是否取消任务？",showCancel:!0,cancelText:"取消",confirmText:"确认",success:function(t){}})}):(this.submitText="实时",this.submit=function(){t.switchTab({url:"/pages/realtime/realtime"})});break;case 5:this.status="待评价",this.submitText="提交",this.submit=function(){this._ready()};break;case 6:this.status="已结束",this.submitText="再次提交",this.isDetail=!0,this.submit=function(){t.redirectTo({url:"/pages/task/createTask"})};break;default:break}this.map=t.createMapContext("map1",this)}},computed:{rateSpan:function(){var t;return t=this.rateValue<3?"不满意":3==this.rateValue?"一般":"满意",t}},onReady:function(){this._ready(),console.log(n(getApp().globalData.basePath," at pages\\task\\taskDetail.vue:345"))}};e.default=h}).call(this,i("6e42")["default"],i("0de9")["default"])},"80f4":function(t,e,i){"use strict";(function(t){i("f53a"),i("921b");n(i("66fd"));var e=n(i("e470"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},ce6e:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},s=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return s})},d1d1:function(t,e,i){},d535:function(t,e,i){"use strict";var n=i("d1d1"),s=i.n(n);s.a},e470:function(t,e,i){"use strict";i.r(e);var n=i("ce6e"),s=i("03b7");for(var a in s)"default"!==a&&function(t){i.d(e,t,function(){return s[t]})}(a);i("d535");var u=i("2877"),r=Object(u["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports}},[["80f4","common/runtime","common/vendor"]]]);